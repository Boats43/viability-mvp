{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/matam/viability-mvp/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport {\n  Chart as ChartJS,\n  LineElement,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  Legend,\n  Tooltip,\n} from \"chart.js\";\n\nChartJS.register(\n  LineElement,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  Legend,\n  Tooltip\n);\n\nexport default function ViabilityMVP() {\n  const [data, setData] = useState({\n    divergence: [] as number[],\n    correction: [] as number[],\n    entropy: [] as number[],\n    viability: [] as boolean[],\n    time: [] as number[],\n  });\n\n  useEffect(() => {\n    const T = 120;              // time horizon\n    const n = 10;               // state dimension\n    const alpha = 1.15;         // correction strength\n    const entropyFloor = 0.6;   // minimum entropy required\n    const noiseLevel = 0.03;    // environmental disturbance\n\n    let Q = Array.from({ length: n }, () => Math.random());\n    normalize(Q);\n\n    const entropy: number[] = [];\n    const divergence: number[] = [];\n    const correction: number[] = [];\n    const viability: boolean[] = [];\n    const time: number[] = [];\n\n    for (let t = 0; t < T; t++) {\n      const P = Array.from({ length: n }, () => Math.random() + 0.3);\n      normalize(P);\n\n      const H = -Q.reduce((acc, p) => acc + p * Math.log(p), 0);\n      const D = Q.reduce((acc, q, i) => acc + q * Math.log(q / P[i]), 0);\n      const C = alpha * D;\n\n      const isViable = C > D && H > entropyFloor;\n\n      entropy.push(H);\n      divergence.push(D);\n      correction.push(C);\n      viability.push(isViable);\n      time.push(t);\n\n      if (!isViable) break;\n\n      for (let i = 0; i < n; i++) {\n        Q[i] = Q[i] - alpha * (Q[i] - P[i]);\n      }\n\n      for (let i = 0; i < n; i++) {\n        Q[i] += noiseLevel * (Math.random() - 0.5);\n        if (Q[i] < 0) Q[i] = 1e-6;\n      }\n\n      normalize(Q);\n    }\n\n    setData({ divergence, correction, entropy, viability, time });\n  }, []);\n\n  const chartData = {\n    labels: data.time,\n    datasets: [\n      {\n        label: \"Divergence (D)\",\n        data: data.divergence,\n        borderColor: \"red\",\n      },\n      {\n        label: \"Correction (C)\",\n        data: data.correction,\n        borderColor: \"green\",\n      },\n      {\n        label: \"Entropy (H)\",\n        data: data.entropy,\n        borderColor: \"blue\",\n      },\n    ],\n  };\n\n  return (\n    <div className=\"p-6 grid gap-6\">\n      <h1 className=\"text-3xl font-bold\">Viability Law — Dynamic MVP</h1>\n\n      <div className=\"bg-white p-4 rounded-xl shadow\">\n        <Line data={chartData} />\n      </div>\n\n      <div className=\"bg-white p-4 rounded-xl shadow text-lg\">\n        <strong>Final Status:</strong>{\" \"}\n        {data.viability.length\n          ? data.viability.at(-1)\n            ? \"✅ Persistent (Viable)\"\n            : \"❌ Collapse (Failure Envelope)\"\n          : \"Loading...\"}\n      </div>\n    </div>\n  );\n}\n\nfunction normalize(v: number[]) {\n  const sum = v.reduce((a, b) => a + b, 0);\n  for (let i = 0; i < v.length; i++) v[i] /= sum;\n}\n"],"names":[],"mappings":"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"}}]
}